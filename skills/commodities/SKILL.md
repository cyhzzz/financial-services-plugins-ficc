# Commodities

## Description
大宗商品业务完整技能体系，覆盖贵金属（黄金、白银）、能源（原油、天然气）、基本金属（铜、铝、锌等）的全品类分析、交易与风险管理。

## Capabilities


### 贵金属 (Precious Metals)

- **黄金市场分析**：
  - 驱动因素：实际利率、美元指数、通胀预期、避险需求
  - 供需分析：央行购金、ETF 持仓、珠宝需求、工业需求
  - 市场情绪：CFTC 持仓、投机情绪、恐惧贪婪指数
  - 技术面：关键支撑阻力、趋势线、动量指标
  - 关联市场：美元指数、美股、比特币、实际利率
  
- **白银市场分析**：
  - 金银比分析：历史区间、均值回归策略
  - 工业属性：光伏需求、电子工业、与其他金属关联
  - 波动率特征：杠杆效应、投机偏好
 
- **铂金与钯金**：
  - 汽车催化剂需求：柴油车 vs 汽油车、排放标准
  - 矿山供给集中：南非、俄罗斯
  - 投资需求：ETF、工业应用
 
- **投资策略**：
  - 实物黄金：金条、金币、积存金
  - 纸黄金：黄金 ETF、银行纸黄金、黄金期货
  - 杠杆工具：黄金 T+D、黄金期货、黄金期权
  - 组合配置：5%-10% 配置、再平衡策略、对冲尾部风险


### 能源 (Energy)

- **原油市场分析**：
  - 基本面：OPEC+ 政策、美国页岩产量、全球需求增长
  - 库存数据：EIA、API、IEA 报告、战略储备
  - 地缘政治：中东局势、俄罗斯制裁、霍尔木兹海峡
  - 炼厂利润：裂解价差、开工率、维护计划
  - 品种差异：WTI vs 布伦特、甜质 vs 酸质、轻重质
 
- **天然气市场分析**：
  - 区域性市场：北美 Henry Hub、欧洲 TTF、亚洲 JKM
  - 季节性：冬季取暖、夏季发电、库存注采
  - LNG 贸易：出口终端、进口需求、运输成本
  - 与原油关系：替代效应、历史比价
 
- **能源转型影响**：
  - 可再生能源：太阳能、风能对化石燃料替代
  - 电动汽车：石油需求峰值、充电基础设施
  - 氢能源：绿氢、蓝氢、碳捕集
  - ESG 投资：撤资运动、绿色金融、碳中和目标


### 基本金属 (Base Metals)
- **铜市场分析**：
  - 宏观指标：全球 PMI、中国需求、美元走势
  - 供给端：矿山产量、干扰事件、品位下降、新项目
  - 需求端：电力基建、房地产、电动汽车、可再生能源
  - 库存监控：LME、SHFE、COMEX、隐形库存
  - 定价结构：现货升贴水、期限结构、套利机会
 
- **铝市场分析**：
  - 能源密集型：电力成本、冶炼产能、中国产能天花板
  - 氧化铝市场：铝土矿、精炼产能、成本曲线
  - 下游需求：交通、建筑、包装、电力
 - 低碳铝：水电铝、再生铝、碳足迹
 
- **锌与铅市场**：
  - 锌：镀锌需求、矿山闭坑、库存周期
  - 铅：电池回收、汽车启停、环境监管
 - 小金属：镍、锡、钴、锂的关联

- **跨品种套利**：
  - 铜金比：经济增长 vs 避险
  - 铜银比：工业需求 vs 贵金属
  - 铜油比：工业活动 vs 能源成本
 - 价差交易：期限套利、品种套利、跨市场套利


### 综合策略与风险管理
- **跨资产配置**：
  - 大宗商品指数：S& GSCI、Bloomberg Commodity、DJUBS
  - 通胀保护：实物资产、CPI 挂钩、TIPS
 - 组合分散化：低相关性、尾部风险保护
 - 动态调整：经济周期、通胀预期、美元走势
 
- **CTA 策略**：
  - 趋势跟踪：均线突破、通道突破、动量模型
 - 均值回归：布林带、RSI 超买超卖、统计套利
 - 模式识别：季节性、日历效应、事件驱动
 - 机器学习：随机森林、神经网络、强化学习
 
- **套利策略**：
  - 跨期套利：正向/反向市场、库存成本、展期收益
 - 跨品种套利：比价关系、替代效应、投入产出
 - 跨市场套利：地理价差、汇率对冲、物流成本
 - 期现套利：基差交易、交割策略、库存融资
 
- **风险管理**：
  - 市场风险：VaR、压力测试、情景分析
  - 流动性风险：市场深度、买卖价差、大额交易执行
  - 基差风险：期现偏离、交割风险、展期成本
  - 操作风险：系统故障、人为错误、合规违规
  - 模型风险：假设局限、参数不确定性、过拟合

 
### 数据处理与工具
- **数据来源**：
  - 交易所：LME、COMEX、SHFE、ICE
  - 数据商：Bloomberg、Reuters、Wind、Qeubee
  - 行业协会：World Gold Council、ICA、ILZSG
  - 政府机构：EIA、IEA、各国统计局、央行
  - 另类数据：卫星图像、航运数据、社交媒体情绪
 
- **分析工具**：
  - 量化平台：Python (pandas, numpy, scipy)、R、MATLAB
  - 可视化：Tableau、Power BI、Python (matplotlib, seaborn)
  - 回测系统：Zipline、Backtrader、VNPY
  - 数据库：SQL、NoSQL、时序数据库
 
- **模型与方法**：
  - 统计模型：ARIMA、GARCH、协整、Granger 因果
  - 机器学习：随机森林、梯度提升、神经网络、强化学习
  - 优化方法：线性规划、动态规划、遗传算法、粒子群
  - 蒙特卡洛：随机模拟、路径生成、敏感性分析
 
## Implementation
### 商品特定模型

```python
class CommodityCurve:
    """商品期限曲线模型"""
    
    def __init__(self, commodity, curve_date, contract_months):
        self.commodity = commodity
        self.curve_date = curve_date
        self.contract_months = contract_months
        self.spot = None
        self.futures = {}
        self.carry = {}
        
    def build_from_futures(self, futures_prices):
        """从期货价格构建曲线"""
        for month, price in futures_prices.items():
            self.futures[month] = {
                'price': price,
                'carry': self._calculate_carry(month),
                'convenience_yield': self._estimate_convenience_yield(month)
            }
        
        self.spot = self._estimate_spot_from_futures()
        
    def _calculate_carry(self, month):
        """计算持仓成本（存储+保险+资金）"""
        storage_cost = self.commodity.storage_cost_per_month
        insurance_cost = self.commodity.insurance_rate * self.futures[month]['price']
        financing_cost = self.risk_free_rate * self.futures[month]['price']
        
        return storage_cost + insurance_cost + financing_cost
    
    def _estimate_convenience_yield(self, month):
        """估计便利收益（持有实物商品的价值）"""
        # 基于库存水平、季节性、短缺风险
        inventory_level = self.commodity.get_inventory_level()
        
        if inventory_level < self.commodity.critical_level:
            convenience_yield = self.commodity.high_convenience_yield
        elif inventory_level > self.commodity.comfortable_level:
            convenience_yield = self.commodity.low_convenience_yield
        else:
            convenience_yield = self.commodity.medium_convenience_yield
            
        return convenience_yield
```
## Dependencies
- quantlib-python (QuantLib Python bindings)
- numpy / pandas / scipy (numerical computation)
- statsmodels (statistical models)
- cvxpy (convex optimization for portfolio/hedging)
- arch (volatility models)
- pyfolio (portfolio analytics)
## License
Apache-2.0 (aligns with Anthropic financial-services-plugins)